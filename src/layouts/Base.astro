---
import "../styles/global.css";
import Header from "../layouts/Header.astro";
import Footer from "../layouts/Footer.astro";
const {
  title = "Golden Pathway",
  description = "Golden Pathway is a London-based immigration consultancy providing clear, compliant, and multilingual UK visa advice.",
  image = "/bg.png",
  robots = "index, follow",
} = Astro.props;

const canonicalURL = new URL(Astro.url.pathname, Astro.site);
const socialImageURL = new URL(image, Astro.site);
---

<html lang="en" class="h-full">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <link rel="icon" href="/favicon.ico" />
    <meta name="generator" content={Astro.generator} />

    <!-- Canonical URL -->
    <link rel="canonical" href={canonicalURL} />

    <!-- Primary Meta Tags -->
    <title>{title}</title>
    <meta name="title" content={title} />
    <meta name="description" content={description} />
    <meta name="robots" content={robots} />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonicalURL} />
    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:image" content={socialImageURL} />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content={canonicalURL} />
    <meta property="twitter:title" content={title} />
    <meta property="twitter:description" content={description} />
    <meta property="twitter:image" content={socialImageURL} />

    <link rel="sitemap" href="/sitemap-index.xml" />

    <!-- Privacy-Friendly Analytics (Plausible/Fathom) -->
    <!-- Uncomment and replace with your script when ready -->
    <!-- <script defer data-domain="goldenpathway.co.uk" src="https://plausible.io/js/script.js"></script> -->

    <script is:inline>
      // Immediate theme application to prevent FOUC
      const savedTheme = localStorage.getItem("theme");
      const systemPrefersLight = window.matchMedia(
        "(prefers-color-scheme: light)",
      ).matches;

      if (savedTheme === "light" || (!savedTheme && systemPrefersLight)) {
        document.documentElement.classList.add("light");
      } else {
        document.documentElement.classList.remove("light");
      }
    </script>
  </head>
  <body class="bg-primary font-sans text-text-main antialiased">
    <!-- Skip to content link -->
    <a
      href="#main-content"
      class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:rounded-md focus:bg-bg-tertiary focus:px-4 focus:py-2 focus:text-text-main focus:shadow-lg"
    >
      Skip to content
    </a>

    <!-- Main container -->
    <div class="container mx-auto max-w-5xl px-4 py-12">
      <!-- Header Navigation -->
      <Header />

      <main id="main-content">
        <slot />
      </main>

      <!-- Footer -->
      <Footer />
    </div>
  </body>
</html>
